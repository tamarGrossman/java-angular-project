<div class="challenge-form-container">
    <h2>爪专转 转专 砖 </h2>

    <form (ngSubmit)="onSubmit()" #challengeForm="ngForm">
        
        <div class="form-group">
            <label for="name">砖 转专:</label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                [(ngModel)]="newChallenge.name" 
                required 
                minlength="5" 
                maxlength="100" 
                #nameControl="ngModel">
            
            @if (nameControl.invalid && nameControl.touched) {
                <div class="validation-error">
                    @if (nameControl.errors?.['required']) {
                        <p>砖 转专  砖 .</p>
                    }
                    @if (nameControl.errors?.['minlength']) {
                        <p>砖 转专  转 驻转 5 转.</p>
                    }
                    @if (nameControl.errors?.['maxlength']) {
                        <p>砖 转专  转 注 100 转.</p>
                    }
                </div>
            }
        </div>
        
        <div class="form-group">
            <label for="description">转专:</label>
            <textarea 
                id="description" 
                name="description" 
                [(ngModel)]="newChallenge.description"
                required
                minlength="10" 
                maxlength="1000000" 
                #descriptionControl="ngModel"></textarea>

            @if (descriptionControl.invalid && descriptionControl.touched) {
                <div class="validation-error">
                    @if (descriptionControl.errors?.['required']) {
                        <p>转专 转专  砖 .</p>
                    }
                    @if (descriptionControl.errors?.['minlength']) {
                        <p>转专  转 驻转 10 转.</p>
                    }
                    @if (descriptionControl.errors?.['maxlength']) {
                        <p>转专  转 注 1000 转.</p>
                    }
                </div>
            }
        </div>
        
        <div class="form-group">
            <label for="numOfDays">住驻专 :</label>
            <input 
                type="number" 
                id="numOfDays" 
                name="numOfDays" 
                [(ngModel)]="newChallenge.numOfDays"
                required
                min="1" 
                max="60"
                #daysControl="ngModel">
            
            @if (daysControl.invalid && daysControl.touched) {
                <div class="validation-error">
                    @if (daysControl.errors?.['required']) {
                        <p>住驻专   砖 .</p>
                    }
                    @if (daysControl.errors?.['min']) {
                        <p>砖 转专    .</p>
                    }
                    @if (daysControl.errors?.['max']) {
                        <p>砖 转专 拽住  60 .</p>
                    }
                </div>
            }
        </div>
        
        <div class="form-group file-upload-group">
            <label>专 转 :</label>

            <input 
                type="file" 
                id="file-upload" 
                name="fileInput" 
                class="file-input-hidden"
                (change)="onFileSelected($event)" 
                accept="image/*">

            <label for="file-upload" class="custom-file-upload">
                <i class="fas fa-camera"></i> 专 拽抓 转
            </label>

            <span class="file-name-display">
                {{ selectedFile ? selectedFile.name : ' 专 拽抓' }}
            </span>
        </div>

        <button type="submit" [disabled]="uploading || challengeForm.invalid">
            {{ uploading ? '注...' : '爪专 转专' }}
        </button>

        @if (successMessage) {
            <p class="success">{{ successMessage }}</p>
        }
        @if (errorMessage) {
            <p class="error">{{ errorMessage }}</p>
        }
    </form>
</div>