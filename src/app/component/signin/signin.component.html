<div class="form-container">

    @if (!isLoggedIn) {
        <h2>转专转 转专 </h2>
        
        <form #loginForm="ngForm" (ngSubmit)="signin()">
            
            <div class="form-row">
                <label for="username">砖 砖转砖:</label>
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="username" 
                        name="username"
                        [(ngModel)]="user.username"
                        required
                        minlength="1"  
                        maxlength="30" 
                        #usernameInput="ngModel">
                        
                    @if (usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)) {
                        <div class="validation-error-message">
                            
                            @if (usernameInput.errors?.['required']) {
                                <small> 住 砖 砖转砖.</small>
                            }
                            
                            @if (usernameInput.errors?.['minlength'] || usernameInput.errors?.['maxlength']) {
                                <small>
                                    专 砖 砖转砖  转  1 -30 转.
                                </small>
                            }
                        </div>
                    }
                </div>
            </div>

            <div class="form-row">
                <label for="password">住住:</label>
                <div class="input-wrapper">
                    <input 
                        type="password" 
                        id="password" 
                        name="password"
                        [(ngModel)]="user.password"
                        required
                        minlength="3"  
                        maxlength="10" 
                        #passwordInput="ngModel">
                        
                    @if (passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)) {
                        <div class="validation-error-message">
                            
                            @if (passwordInput.errors?.['required']) {
                                <small> 住 住住.</small>
                            }
                            
                            @if (passwordInput.errors?.['minlength'] || passwordInput.errors?.['maxlength']) {
                                <small>
                                    专 住住  转  3 -10 转.
                                </small>
                            }
                        </div>
                    }
                </div>
            </div>

            <button type="submit" [disabled]="!loginForm.form.valid">转专</button>
        </form>
    }
    
    @if (message) {
        <div class="message">
            {{ message }}
        </div>
    }

    @if (isLoggedIn && currentUsername && !message.startsWith('转专转 爪!')) {
        <div class="success-state">
            <h3> 专  转专!</h3>
            <p> 专 专, 砖 {{ currentUsername }}</p> 
            <p> 砖 专转 砖.</p>
        </div>
    }
</div>